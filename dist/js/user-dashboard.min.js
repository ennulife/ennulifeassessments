(()=>{function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function a(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}window.ENNUCharts={addScorePoint:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=document.querySelector(".ennu-user-dashboard");a&&a.ennuDashboard&&a.ennuDashboard.addDataPoint("score",t,e)},addBMIPoint:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=document.querySelector(".ennu-user-dashboard");a&&a.ennuDashboard&&a.ennuDashboard.addDataPoint("bmi",t,e)},refreshCharts:function(){var t=document.querySelector(".ennu-user-dashboard");t&&t.ennuDashboard&&t.ennuDashboard.updateCharts()},reinitializeCharts:function(){var t=document.querySelector(".ennu-user-dashboard");t&&t.ennuDashboard&&t.ennuDashboard.reinitializeCharts()}};var i=!1;document.addEventListener("DOMContentLoaded",function(){if(!i){var t=document.querySelector(".ennu-user-dashboard");if(t){if(t.querySelector(".dashboard-logged-out-container"))return;t.ennuDashboard&&t.ennuDashboard.destroy(),new c(t),i=!0}new o}});var s,o=function(){return a(function e(){t(this,e),this.activeTab="tab-my-assessments",this.tabContainer=null,this.tabLinks=[],this.tabContents=[],this.init()},[{key:"init",value:function(){var t=this;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return t.initialize()}):this.initialize()}},{key:"initialize",value:function(){this.tabContainer=document.querySelector(".my-story-tabs"),this.tabContainer&&(this.tabLinks=this.tabContainer.querySelectorAll(".my-story-tab-nav a"),this.tabContents=this.tabContainer.querySelectorAll(".my-story-tab-content"),0!==this.tabLinks.length&&0!==this.tabContents.length&&(this.setupEventListeners(),this.addAccessibilityAttributes(),this.activateFirstTab()))}},{key:"activateFirstTab",value:function(){this.tabContents.forEach(function(t){t.classList.remove("my-story-tab-active"),t.style.display="none",t.style.opacity="0",t.style.transform="translateY(10px)"}),this.tabLinks.forEach(function(t){t.classList.remove("my-story-tab-active")});var t="#tab-my-biomarkers",e=this.tabContainer.querySelector('a[href="'.concat(t,'"]')),a=document.querySelector(t);if(e&&a)e.classList.add("my-story-tab-active"),a.classList.add("my-story-tab-active"),a.style.display="block",setTimeout(function(){a.style.opacity="1",a.style.transform="translateY(0)"},50),this.activeTab=t.substring(1);else if(this.tabLinks.length>0){var n=this.tabLinks[0],r=n.getAttribute("href"),i=document.querySelector(r);i&&(n.classList.add("my-story-tab-active"),i.classList.add("my-story-tab-active"),i.style.display="block",setTimeout(function(){i.style.opacity="1",i.style.transform="translateY(0)"},50),this.activeTab=r.substring(1))}}},{key:"setupEventListeners",value:function(){var t=this;this.tabLinks.forEach(function(e){e.addEventListener("click",function(a){a.preventDefault();var n=e.getAttribute("href");t.switchToTab(n)})}),this.tabContainer.addEventListener("keydown",function(e){if("ArrowLeft"===e.key||"ArrowRight"===e.key){e.preventDefault();var a="ArrowLeft"===e.key?-1:1;t.navigateToNextTab(a)}})}},{key:"addAccessibilityAttributes",value:function(){this.tabLinks.forEach(function(t,e){var a=t.getAttribute("href").substring(1);t.setAttribute("role","tab"),t.setAttribute("aria-controls",a),t.setAttribute("aria-selected",t.classList.contains("my-story-tab-active")),t.setAttribute("tabindex",t.classList.contains("my-story-tab-active")?"0":"-1")}),this.tabContents.forEach(function(t){t.setAttribute("role","tabpanel"),t.setAttribute("aria-hidden",!t.classList.contains("my-story-tab-active"))});var t=this.tabContainer.querySelector(".my-story-tab-nav ul");t&&t.setAttribute("role","tablist")}},{key:"switchToTab",value:function(t){t.startsWith("#")||(t="#"+t);var e=document.querySelector(t);if(!e){if("#tab-my-symptoms"===t){var a=document.querySelector('.my-story-tab-content[id*="symptoms"]');a&&(e=a)}if(!e)return}this.tabLinks.forEach(function(t){t.classList.remove("my-story-tab-active"),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1")}),this.tabContents.forEach(function(t){t.classList.remove("my-story-tab-active"),t.setAttribute("aria-hidden","true"),t.style.display="none",t.style.opacity="0",t.style.transform="translateY(10px)"});var n=this.tabContainer.querySelector('a[href="'.concat(t,'"]'));if(n)n.classList.add("my-story-tab-active"),n.setAttribute("aria-selected","true"),n.setAttribute("tabindex","0");else if("#tab-my-symptoms"===t){var r=Array.from(this.tabLinks).find(function(t){return t.textContent.toLowerCase().includes("symptoms")});r&&(r.classList.add("my-story-tab-active"),r.setAttribute("aria-selected","true"),r.setAttribute("tabindex","0"))}e.classList.add("my-story-tab-active"),e.setAttribute("aria-hidden","false"),e.style.display="block",setTimeout(function(){e.style.opacity="1",e.style.transform="translateY(0)"},50),this.activeTab=t.substring(1),this.triggerTabChangeEvent(t,n,e),"#tab-my-symptoms"===t&&this.updateSymptomsDisplay()}},{key:"navigateToNextTab",value:function(t){var e=Array.from(this.tabLinks).findIndex(function(t){return t.classList.contains("my-story-tab-active")});if(-1!==e){var a=(e+t+this.tabLinks.length)%this.tabLinks.length,n=this.tabLinks[a];this.switchToTab(n.getAttribute("href"))}}},{key:"triggerTabChangeEvent",value:function(t,e,a){var n=new CustomEvent("tabChanged",{detail:{targetId:t,activeLink:e,targetContent:a}});this.tabContainer.dispatchEvent(n)}},{key:"saveTabState",value:function(){"undefined"!=typeof localStorage&&localStorage.setItem("ennu-active-tab",this.activeTab)}},{key:"loadTabState",value:function(){if("undefined"!=typeof localStorage){var t=localStorage.getItem("ennu-active-tab");t&&this.tabContainer.querySelector('a[href="#'.concat(t,'"]'))&&this.switchToTab("#"+t)}}},{key:"getActiveTab",value:function(){return this.activeTab}},{key:"getAllTabs",value:function(){return Array.from(this.tabLinks).map(function(t){return t.getAttribute("href").substring(1)})}},{key:"updateSymptomsDisplay",value:function(){var t=document.getElementById("total-symptoms-count"),e=document.getElementById("active-symptoms-count"),a=document.getElementById("biomarker-correlations"),n=document.getElementById("trending-symptoms");if(t){var r=document.querySelectorAll(".symptom-item");t.textContent=r.length}if(e){var i=document.querySelectorAll(".symptom-item.active");e.textContent=i.length}if(a){var s=document.querySelectorAll(".biomarker-tag");a.textContent=s.length}if(n){var o=document.querySelectorAll(".symptom-item.trending");n.textContent=o.length}}}])}();(s=document.createElement("style")).textContent="\n        .my-story-tab-content {\n            display: none;\n            opacity: 0;\n            transform: translateY(10px);\n            transition: all 0.3s ease;\n        }\n        \n        .my-story-tab-content.my-story-tab-active {\n            display: block;\n            opacity: 1;\n            transform: translateY(0);\n        }\n    ",document.head.appendChild(s);var c=function(){return a(function e(a){t(this,e),this.dashboard=a,this.dashboard.ennuDashboard=this,this.chartInstances={scoreHistory:null,bmiHistory:null},this.init()},[{key:"initThemeToggle",value:function(){var t=this,e=this.dashboard.querySelector("#theme-toggle");e&&(localStorage.removeItem("ennu-theme"),this.setTheme("light"),e.addEventListener("click",function(){var e="dark"===(t.dashboard.getAttribute("data-theme")||"light")?"light":"dark";t.setTheme(e)}))}},{key:"setTheme",value:function(t){this.dashboard.setAttribute("data-theme",t);var e=this.dashboard.querySelector(".toggle-thumb");e&&(e.style.transform="light"===t?"translateX(0)":"translateX(30px)")}},{key:"initToggleAll",value:function(){var t=this,e=this.dashboard.querySelector("#toggle-all-accordions");e&&e.addEventListener("click",function(){var a=t.dashboard.querySelectorAll(".accordion-item"),n=Array.from(a).every(function(t){return t.classList.contains("open")});a.forEach(function(t){n?t.classList.remove("open"):t.classList.add("open")}),e.textContent=n?"Expand All":"Collapse All"})}},{key:"initHealthMapAccordion",value:function(){this.dashboard.querySelectorAll(".accordion-item").forEach(function(t){var e=t.querySelector(".accordion-header");e&&(e.addEventListener("click",function(){t.classList.toggle("open")}),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.classList.toggle("open"))}))})}},{key:"initDetailsToggle",value:function(){this.dashboard.querySelectorAll(".view-details-toggle").forEach(function(t){t.addEventListener("click",function(){var e=t.closest(".assessment-list-item"),a=e.querySelector(".category-details-container");if(a){var n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!n),n?(a.style.opacity="0",a.style.transform="translateY(-10px)",setTimeout(function(){a.style.display="none"},300)):(a.style.display="block",setTimeout(function(){a.style.opacity="1",a.style.transform="translateY(0)"},10))}})})}},{key:"initContextualText",value:function(){var t=this.dashboard.querySelector("#contextual-text"),e=this.dashboard.querySelector(".main-score-orb");if(t&&e){var a="Your ENNU Life Score indicates significant opportunities for health optimization. Focus on completing assessments and implementing foundational lifestyle changes.",n="You're making progress! Continue with your health journey by completing more assessments and following personalized recommendations.",r="Great work! Your health foundation is solid. Focus on fine-tuning specific areas and maintaining consistency.",i="Excellent! You're approaching optimal health. Continue your current practices and explore advanced optimization strategies.",s="Outstanding! You've achieved exceptional health optimization. Maintain your practices and consider becoming a health mentor.",o=function(){var o=parseFloat(e.getAttribute("data-score")||0),c=a;o>=9?c=s:o>=7?c=i:o>=5?c=r:o>=3&&(c=n),t.textContent=c};e.addEventListener("mouseenter",function(){o(),t.classList.add("visible")}),e.addEventListener("mouseleave",function(){t.classList.remove("visible")}),o()}}},{key:"initScoreAnimation",value:function(){var t=this.dashboard.querySelector(".main-score-orb");if(t){var e=parseFloat(t.getAttribute("data-score")||0),a=t.querySelector(".main-score-value");if(a){var n=0,r=performance.now(),i=function(s){var o=s-r,c=Math.min(o/2e3,1),l=1-Math.pow(1-c,4);n=e*l,a.textContent=n.toFixed(1),c<1?requestAnimationFrame(i):t.classList.add("loaded")};requestAnimationFrame(i)}}}},{key:"initPillarAnimation",value:function(){this.dashboard.querySelectorAll(".pillar-orb").forEach(function(t,e){setTimeout(function(){t.classList.add("visible")},200*e)})}},{key:"initHistoricalCharts",value:function(){"undefined"!=typeof Chart?(void 0===Chart.adapters||Chart.adapters.date,0!==document.querySelectorAll(".chart-wrapper").length&&(this.initScoreHistoryChart(),this.initBMIHistoryChart(),this.setupChartRefreshOnTabShow())):this.showChartError("Chart.js library is not available. Please refresh the page and try again.")}},{key:"initScoreHistoryChart",value:function(){var t=this.dashboard.querySelector("#scoreHistoryChart");if(t){this.chartInstances.scoreHistory&&(this.chartInstances.scoreHistory.destroy(),this.chartInstances.scoreHistory=null);var e=this.getUserScoreData();if(e&&e.length>0)try{var a={type:"line",data:{labels:e.map(function(t){return new Date(t.date)}),datasets:[{label:"ENNU Life Score",data:e.map(function(t){return t.score}),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#10b981",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},scales:{x:{type:"time",time:{unit:e.length>30?"week":"day",displayFormats:{day:"MMM d",week:"MMM d"}},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}},y:{beginAtZero:!1,min:0,max:10,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(52, 211, 153, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:function(t){return"Score: "+t[0].parsed.y.toFixed(1)},label:function(t){var a,n=t.dataIndex;return"Date: "+((null===(a=e[n])||void 0===a?void 0:a.originalDate)||new Date(t.parsed.x).toLocaleDateString())}}}}}};this.chartInstances.scoreHistory=new Chart(t,a)}catch(t){this.showChartError("Failed to load score history chart")}else this.showEmptyChartState(t,"📊","No Score Data","Complete assessments to see your score history")}else this.showChartError("Score history chart not available. Please log in to view your health trends.")}},{key:"initBMIHistoryChart",value:function(){var t=this.dashboard.querySelector("#bmiHistoryChart");if(t){this.chartInstances.bmiHistory&&(this.chartInstances.bmiHistory.destroy(),this.chartInstances.bmiHistory=null);var e=this.getUserBMIData();if(e&&e.length>0)try{this.chartInstances.bmiHistory=new Chart(t,{type:"line",data:{labels:e.map(function(t){return new Date(t.date)}),datasets:[{label:"BMI",data:e.map(function(t){return t.bmi}),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},scales:{x:{type:"time",time:{unit:e.length>30?"week":"day",displayFormats:{day:"MMM d",week:"MMM d"}},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}},y:{beginAtZero:!1,min:15,max:40,grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(59, 130, 246, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:function(t){return"BMI: "+t[0].parsed.y.toFixed(1)},label:function(t){var a,n=t.dataIndex;return"Date: "+((null===(a=e[n])||void 0===a?void 0:a.originalDate)||new Date(t.parsed.x).toLocaleDateString())}}}}}})}catch(t){this.showChartError("Failed to load BMI history chart")}else this.showEmptyChartState(t,"⚖️","No BMI Data","Add your height and weight to see BMI trends")}else this.showChartError("BMI history chart not available. Please log in to view your health trends.")}},{key:"setupChartRefreshOnTabShow",value:function(){var t=this,e=document.querySelector('a[href="#tab-my-trends"]');e&&e.addEventListener("click",function(){setTimeout(function(){t.chartInstances.scoreHistory||t.initScoreHistoryChart(),t.chartInstances.bmiHistory||t.initBMIHistoryChart(),t.updateCharts()},200)}),document.addEventListener("tabChanged",function(e){e.detail&&"tab-my-trends"===e.detail.targetId&&setTimeout(function(){t.reinitializeCharts()},300)})}},{key:"getUserScoreData",value:function(){try{if("undefined"!=typeof dashboardData&&dashboardData.score_history&&dashboardData.score_history.length>0){var t=dashboardData.score_history.map(function(t){return{date:new Date(t.date).toISOString(),score:parseFloat(t.score),originalDate:t.date}});return t.sort(function(t,e){return new Date(t.date)-new Date(e.date)}),t}var e=0,a=document.querySelector("[data-current-score]");if(a)e=parseFloat(a.dataset.currentScore)||0;else{var n,r=null===(n=document.querySelector(".stat-value"))||void 0===n?void 0:n.textContent;r&&(e=parseFloat(r)||0)}var i=document.querySelectorAll(".assessment-trend-card"),s=[],o=0;if(i.forEach(function(t,e){var a=t.querySelector(".score-value"),n=t.querySelector(".assessment-date");if(a&&n){var r,i=parseFloat(a.textContent),c=n.textContent;if(r="Recent"===c?new Date:new Date(c),!isNaN(i)&&!isNaN(r.getTime())){var l=new Date(r.getTime()+6e4*o);s.push({date:l.toISOString(),score:i,originalDate:r.toISOString().split("T")[0]}),o++}}}),0===s.length&&e>0&&s.push({date:(new Date).toISOString(),score:e,originalDate:(new Date).toISOString().split("T")[0]}),0===s.length)for(var c=6;c>=0;c--){var l=new Date;l.setDate(l.getDate()-c);var d=2*(Math.random()-.5),u=Math.max(0,Math.min(10,6.5+d));s.push({date:l.toISOString(),score:parseFloat(u.toFixed(1)),originalDate:l.toISOString().split("T")[0],isSample:!0})}return s.sort(function(t,e){return new Date(t.date)-new Date(e.date)}),s}catch(t){return[{date:(new Date).toISOString(),score:7.5,originalDate:(new Date).toISOString().split("T")[0],isSample:!0}]}}},{key:"getUserBMIData",value:function(){try{if("undefined"!=typeof dashboardData&&dashboardData.bmi_history&&dashboardData.bmi_history.length>0){var t=dashboardData.bmi_history.map(function(t){return{date:new Date(t.date).toISOString(),bmi:parseFloat(t.bmi),originalDate:t.date}});return t.sort(function(t,e){return new Date(t.date)-new Date(e.date)}),t}var e=document.querySelectorAll('[data-biomarker="bmi"] .biomarker-measurement'),a=[],n=0;if(e.forEach(function(t){var e=t.querySelector(".biomarker-current-value"),r=t.querySelector(".biomarker-date");if(e&&r){var i=parseFloat(e.textContent),s=r.textContent,o=new Date;if(s.includes("ago")){var c=s.match(/(\d+)\s+(day|days|hour|hours|minute|minutes)\s+ago/);if(c){var l=parseInt(c[1]),d=c[2];d.includes("day")?o.setDate(o.getDate()-l):d.includes("hour")?o.setHours(o.getHours()-l):d.includes("minute")&&o.setMinutes(o.getMinutes()-l)}}if(!isNaN(i)){var u=new Date(o.getTime()+6e4*n);a.push({date:u.toISOString(),bmi:i,originalDate:o.toISOString().split("T")[0]}),n++}}}),0===a.length){var r=document.querySelector(".info-item .info-value");if(r){var i=r.textContent,s=parseFloat(i);isNaN(s)||a.push({date:(new Date).toISOString(),bmi:s,originalDate:(new Date).toISOString().split("T")[0]})}}if(0===a.length)for(var o=6;o>=0;o--){var c=new Date;c.setDate(c.getDate()-o);var l=.8*(Math.random()-.5),d=Math.max(18,Math.min(35,24.5+l));a.push({date:c.toISOString(),bmi:parseFloat(d.toFixed(1)),originalDate:c.toISOString().split("T")[0],isSample:!0})}return a.sort(function(t,e){return new Date(t.date)-new Date(e.date)}),a}catch(t){return[{date:(new Date).toISOString(),bmi:24.5,originalDate:(new Date).toISOString().split("T")[0],isSample:!0}]}}},{key:"showEmptyChartState",value:function(t,e,a,n){var r=t.parentElement;r&&(r.innerHTML='\n\t\t\t\t<div class="empty-state" style="text-align: center; padding: 2rem; color: rgba(255, 255, 255, 0.7);">\n\t\t\t\t\t<div class="empty-state-icon" style="font-size: 3rem; margin-bottom: 1rem;">'.concat(e,'</div>\n\t\t\t\t\t<h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem; font-weight: 600;">').concat(a,'</h3>\n\t\t\t\t\t<p style="margin: 0; font-size: 0.9rem; opacity: 0.8;">').concat(n,"</p>\n\t\t\t\t</div>\n\t\t\t"))}},{key:"showChartError",value:function(t){document.querySelectorAll(".chart-wrapper").forEach(function(e){e.querySelector(".empty-state")||e.querySelector(".chart-error")||(e.innerHTML='\n\t\t\t\t\t<div class="chart-error" style="text-align: center; padding: 2rem; color: #ef4444; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">\n\t\t\t\t\t\t<div class="error-icon" style="font-size: 2rem; margin-bottom: 1rem;">⚠️</div>\n\t\t\t\t\t\t<p style="margin: 0; font-size: 0.9rem; line-height: 1.4;">'.concat(t,'</p>\n\t\t\t\t\t\t<p style="margin: 0.5rem 0 0 0; font-size: 0.8rem; opacity: 0.8;">If this issue persists, please contact support.</p>\n\t\t\t\t\t</div>\n\t\t\t\t'))})}},{key:"updateCharts",value:function(){if(this.chartInstances.scoreHistory){var t=this.getUserScoreData();this.chartInstances.scoreHistory.data.labels=t.map(function(t){return new Date(t.date)}),this.chartInstances.scoreHistory.data.datasets[0].data=t.map(function(t){return t.score}),this.chartInstances.scoreHistory.update("none")}if(this.chartInstances.bmiHistory){var e=this.getUserBMIData();this.chartInstances.bmiHistory.data.labels=e.map(function(t){return new Date(t.date)}),this.chartInstances.bmiHistory.data.datasets[0].data=e.map(function(t){return t.bmi}),this.chartInstances.bmiHistory.update("none")}}},{key:"addDataPoint",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=a?new Date(a):new Date,r=new Date(n.getTime()+6e4*Math.random());"score"===t?this.chartInstances.scoreHistory&&(this.chartInstances.scoreHistory.data.labels.push(r),this.chartInstances.scoreHistory.data.datasets[0].data.push(e),this.chartInstances.scoreHistory.update("active")):"bmi"===t&&this.chartInstances.bmiHistory&&(this.chartInstances.bmiHistory.data.labels.push(r),this.chartInstances.bmiHistory.data.datasets[0].data.push(e),this.chartInstances.bmiHistory.update("active"))}},{key:"initAssessmentCardInteractions",value:function(){var t=this;this.dashboard.querySelectorAll(".assessment-card").forEach(function(t){t.addEventListener("mouseenter",function(){t.style.transform="translateY(-4px)"}),t.addEventListener("mouseleave",function(){t.style.transform="translateY(0)"}),t.querySelectorAll(".btn").forEach(function(e){e.addEventListener("click",function(a){e.textContent.trim(),t.querySelector(".assessment-title").textContent})})}),this.dashboard.addEventListener("click",function(e){var a=e.target.closest(".btn-recommendations"),n=e.target.closest(".btn-breakdown");a&&(e.preventDefault(),t.toggleSection(a,"recommendations-section")),n&&(e.preventDefault(),t.toggleSection(n,"breakdown-section"))})}},{key:"toggleSection",value:function(t,e){var a=t.closest(".assessment-card").querySelector("."+e);a&&(t.classList.toggle("active"),a.classList.contains("expanded")?"breakdown-section"===e?(this.animateProgressBars(a,"out"),setTimeout(function(){a.classList.remove("expanded"),setTimeout(function(){a.style.display="none",a.classList.add("hidden")},400)},600)):(a.classList.remove("expanded"),setTimeout(function(){a.style.display="none",a.classList.add("hidden")},400)):(a.style.display="block",a.classList.remove("hidden"),requestAnimationFrame(function(){a.classList.add("expanded")}),"breakdown-section"===e&&this.animateProgressBars(a,"in")))}},{key:"animateProgressBars",value:function(t,e){t.querySelectorAll(".category-score-fill").forEach(function(t,a){var n=t.style.width;t.style.setProperty("--target-width",n),setTimeout(function(){"in"===e?(t.classList.remove("animate-out"),t.classList.add("animate-in")):(t.classList.remove("animate-in"),t.classList.add("animate-out"))},100*a)})}},{key:"initProgressBarAnimation",value:function(){var t=this.dashboard.querySelector(".progress-fill");if(t){var e=t.style.width;t.style.width="0%",setTimeout(function(){t.style.width=e},1e3)}}},{key:"init",value:function(){this.initDetailsToggle(),this.initContextualText(),this.initScoreAnimation(),this.initPillarAnimation(),this.initHistoricalCharts(),this.initHealthMapAccordion(),this.initToggleAll(),this.initAssessmentCardInteractions(),this.initProgressBarAnimation(),this.initThemeToggle()}},{key:"destroy",value:function(){this.chartInstances.scoreHistory&&(this.chartInstances.scoreHistory.destroy(),this.chartInstances.scoreHistory=null),this.chartInstances.bmiHistory&&(this.chartInstances.bmiHistory.destroy(),this.chartInstances.bmiHistory=null),this.dashboard.ennuDashboard=null}},{key:"reinitializeCharts",value:function(){this.chartInstances.scoreHistory&&(this.chartInstances.scoreHistory.destroy(),this.chartInstances.scoreHistory=null),this.chartInstances.bmiHistory&&(this.chartInstances.bmiHistory.destroy(),this.chartInstances.bmiHistory=null),this.initScoreHistoryChart(),this.initBMIHistoryChart()}}])}()})();
//# sourceMappingURL=user-dashboard.min.js.map