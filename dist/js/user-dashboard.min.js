(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,n(i.key),i)}}function i(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function n(e){var a=function(e,a){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,a||"default");if("object"!=t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==t(a)?a:a+""}document.addEventListener("DOMContentLoaded",function(){var t=document.querySelector(".ennu-user-dashboard");t&&new s(t);new r});var o,r=function(){return i(function t(){e(this,t),this.activeTab="tab-my-assessments",this.tabContainer=null,this.tabLinks=[],this.tabContents=[],this.init()},[{key:"init",value:function(){var t=this;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return t.initialize()}):this.initialize()}},{key:"initialize",value:function(){this.tabContainer=document.querySelector(".my-story-tabs"),this.tabContainer&&(this.tabLinks=this.tabContainer.querySelectorAll(".my-story-tab-nav a"),this.tabContents=this.tabContainer.querySelectorAll(".my-story-tab-content"),0!==this.tabLinks.length&&0!==this.tabContents.length&&(this.setupEventListeners(),this.addAccessibilityAttributes(),this.activateFirstTab()))}},{key:"activateFirstTab",value:function(){if(this.tabContents.forEach(function(t){t.classList.remove("my-story-tab-active"),t.style.display="none",t.style.opacity="0",t.style.transform="translateY(10px)"}),this.tabLinks.forEach(function(t){t.classList.remove("my-story-tab-active")}),this.tabLinks.length>0){var t=this.tabLinks[0],e=t.getAttribute("href"),a=document.querySelector(e);a&&(t.classList.add("my-story-tab-active"),a.classList.add("my-story-tab-active"),a.style.display="block",setTimeout(function(){a.style.opacity="1",a.style.transform="translateY(0)"},50),this.activeTab=e.substring(1))}}},{key:"setupEventListeners",value:function(){var t=this;this.tabLinks.forEach(function(e,a){e.addEventListener("click",function(a){a.preventDefault(),t.switchToTab(e.getAttribute("href"))}),e.addEventListener("keydown",function(a){"Enter"===a.key||" "===a.key?(a.preventDefault(),t.switchToTab(e.getAttribute("href"))):"ArrowRight"===a.key?(a.preventDefault(),t.navigateToNextTab(1)):"ArrowLeft"===a.key&&(a.preventDefault(),t.navigateToNextTab(-1))})}),document.addEventListener("click",function(e){if(e.target.classList.contains("switch-tab")||e.target.closest(".switch-tab")){e.preventDefault();var a=(e.target.classList.contains("switch-tab")?e.target:e.target.closest(".switch-tab")).getAttribute("data-tab");a&&t.switchToTab("#"+a)}})}},{key:"addAccessibilityAttributes",value:function(){this.tabLinks.forEach(function(t,e){var a=t.getAttribute("href").substring(1);t.setAttribute("role","tab"),t.setAttribute("aria-controls",a),t.setAttribute("aria-selected",t.classList.contains("my-story-tab-active")),t.setAttribute("tabindex",t.classList.contains("my-story-tab-active")?"0":"-1")}),this.tabContents.forEach(function(t){t.setAttribute("role","tabpanel"),t.setAttribute("aria-hidden",!t.classList.contains("my-story-tab-active"))});var t=this.tabContainer.querySelector(".my-story-tab-nav ul");t&&t.setAttribute("role","tablist")}},{key:"switchToTab",value:function(t){t.startsWith("#")||(t="#"+t);var e=document.querySelector(t);if(e){this.tabLinks.forEach(function(t){t.classList.remove("my-story-tab-active"),t.setAttribute("aria-selected","false"),t.setAttribute("tabindex","-1")}),this.tabContents.forEach(function(t){t.classList.remove("my-story-tab-active"),t.setAttribute("aria-hidden","true"),t.style.display="none",t.style.opacity="0",t.style.transform="translateY(10px)"});var a=this.tabContainer.querySelector('a[href="'.concat(t,'"]'));a&&(a.classList.add("my-story-tab-active"),a.setAttribute("aria-selected","true"),a.setAttribute("tabindex","0")),e.classList.add("my-story-tab-active"),e.setAttribute("aria-hidden","false"),e.style.display="block",setTimeout(function(){e.style.opacity="1",e.style.transform="translateY(0)"},50),this.activeTab=t.substring(1)}}},{key:"navigateToNextTab",value:function(t){var e=Array.from(this.tabLinks).findIndex(function(t){return t.classList.contains("my-story-tab-active")});if(-1!==e){var a=(e+t+this.tabLinks.length)%this.tabLinks.length,i=this.tabLinks[a];this.switchToTab(i.getAttribute("href"))}}},{key:"triggerTabChangeEvent",value:function(t,e,a){var i=new CustomEvent("tabChanged",{detail:{targetId:t,activeLink:e,targetContent:a}});this.tabContainer.dispatchEvent(i)}},{key:"saveTabState",value:function(){"undefined"!=typeof localStorage&&localStorage.setItem("ennu-active-tab",this.activeTab)}},{key:"loadTabState",value:function(){if("undefined"!=typeof localStorage){var t=localStorage.getItem("ennu-active-tab");t&&this.tabContainer.querySelector('a[href="#'.concat(t,'"]'))&&this.switchToTab("#"+t)}}},{key:"getActiveTab",value:function(){return this.activeTab}},{key:"getAllTabs",value:function(){return Array.from(this.tabLinks).map(function(t){return t.getAttribute("href").substring(1)})}}])}();(o=document.createElement("style")).textContent="\n        .my-story-tab-content {\n            display: none;\n            opacity: 0;\n            transform: translateY(10px);\n            transition: all 0.3s ease;\n        }\n        \n        .my-story-tab-content.my-story-tab-active {\n            display: block;\n            opacity: 1;\n            transform: translateY(0);\n        }\n    ",document.head.appendChild(o);var s=function(){return i(function t(a){e(this,t),this.dashboard=a,this.init()},[{key:"initThemeToggle",value:function(){var t=this,e=this.dashboard.querySelector("#theme-toggle");if(e){var a=localStorage.getItem("ennu-theme")||"dark";this.setTheme(a),e.addEventListener("click",function(){var e="dark"===(t.dashboard.getAttribute("data-theme")||"dark")?"light":"dark";t.setTheme(e)})}}},{key:"setTheme",value:function(t){this.dashboard.setAttribute("data-theme",t),localStorage.setItem("ennu-theme",t);var e=this.dashboard.querySelector(".toggle-thumb");e&&(e.style.transform="light"===t?"translateX(30px)":"translateX(0)")}},{key:"initToggleAll",value:function(){var t=this,e=this.dashboard.querySelector("#toggle-all-accordions");e&&e.addEventListener("click",function(){var a=t.dashboard.querySelectorAll(".accordion-item"),i=Array.from(a).every(function(t){return t.classList.contains("open")});a.forEach(function(t){i?t.classList.remove("open"):t.classList.add("open")}),e.textContent=i?"Expand All":"Collapse All"})}},{key:"initHealthMapAccordion",value:function(){this.dashboard.querySelectorAll(".accordion-item").forEach(function(t){var e=t.querySelector(".accordion-header");e&&(e.addEventListener("click",function(){t.classList.toggle("open")}),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),t.classList.toggle("open"))}))})}},{key:"initDetailsToggle",value:function(){this.dashboard.querySelectorAll(".view-details-toggle").forEach(function(t){t.addEventListener("click",function(){var e=t.closest(".assessment-list-item"),a=e.querySelector(".category-details-container");if(a){var i="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!i),i?(a.style.opacity="0",a.style.transform="translateY(-10px)",setTimeout(function(){a.style.display="none"},300)):(a.style.display="block",setTimeout(function(){a.style.opacity="1",a.style.transform="translateY(0)"},10))}})})}},{key:"initContextualText",value:function(){var t=this.dashboard.querySelector("#contextual-text"),e=this.dashboard.querySelector(".main-score-orb");if(t&&e){var a="Your ENNU Life Score indicates significant opportunities for health optimization. Focus on completing assessments and implementing foundational lifestyle changes.",i="You're making progress! Continue with your health journey by completing more assessments and following personalized recommendations.",n="Great work! Your health foundation is solid. Focus on fine-tuning specific areas and maintaining consistency.",o="Excellent! You're approaching optimal health. Continue your current practices and explore advanced optimization strategies.",r="Outstanding! You've achieved exceptional health optimization. Maintain your practices and consider becoming a health mentor.",s=function(){var s=parseFloat(e.getAttribute("data-score")||0),l=a;s>=9?l=r:s>=7?l=o:s>=5?l=n:s>=3&&(l=i),t.textContent=l};e.addEventListener("mouseenter",function(){s(),t.classList.add("visible")}),e.addEventListener("mouseleave",function(){t.classList.remove("visible")}),s()}}},{key:"initScoreAnimation",value:function(){var t=this.dashboard.querySelector(".main-score-orb");if(t){var e=parseFloat(t.getAttribute("data-score")||0),a=t.querySelector(".main-score-value");if(a){var i=0,n=performance.now(),o=function(r){var s=r-n,l=Math.min(s/2e3,1),c=1-Math.pow(1-l,4);i=e*c,a.textContent=i.toFixed(1),l<1?requestAnimationFrame(o):t.classList.add("loaded")};requestAnimationFrame(o)}}}},{key:"initPillarAnimation",value:function(){this.dashboard.querySelectorAll(".pillar-orb").forEach(function(t,e){setTimeout(function(){t.classList.add("visible")},200*e)})}},{key:"initHistoricalCharts",value:function(){"undefined"!=typeof Chart&&(this.initScoreHistoryChart(),this.initBMIHistoryChart())}},{key:"initScoreHistoryChart",value:function(){var t=this.dashboard.querySelector("#scoreHistoryChart");if(t){var e=[{date:"2024-01-01",score:6.2},{date:"2024-02-01",score:6.8},{date:"2024-03-01",score:7.1},{date:"2024-04-01",score:7.5},{date:"2024-05-01",score:7.8},{date:"2024-06-01",score:8.2}];e.length>0?new Chart(t,{type:"line",data:{labels:e.map(function(t){return new Date(t.date)}),datasets:[{label:"ENNU Life Score",data:e.map(function(t){return t.score}),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#10b981",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},scales:{x:{type:"time",time:{unit:"day",displayFormats:{day:"MMM d"}},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(52, 211, 153, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:function(t){return"Score: "+t[0].parsed.y.toFixed(1)},label:function(t){return"Date: "+new Date(t.parsed.x).toLocaleDateString()}}}}}}):(t.parentElement.classList.add("loading"),t.parentElement.innerHTML='<div class="empty-state"><div class="empty-state-icon">üìä</div><h3>No Score Data</h3><p>Complete assessments to see your score history</p></div>')}}},{key:"initBMIHistoryChart",value:function(){var t=this.dashboard.querySelector("#bmiHistoryChart");if(t){var e=[{date:"2024-01-01",bmi:24.5},{date:"2024-02-01",bmi:24.2},{date:"2024-03-01",bmi:23.8},{date:"2024-04-01",bmi:23.5},{date:"2024-05-01",bmi:23.1},{date:"2024-06-01",bmi:22.8}];e.length>0?new Chart(t,{type:"line",data:{labels:e.map(function(t){return new Date(t.date)}),datasets:[{label:"BMI",data:e.map(function(t){return t.bmi}),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#3b82f6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},scales:{x:{type:"time",time:{unit:"day",displayFormats:{day:"MMM d"}},grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}},y:{grid:{color:"rgba(255, 255, 255, 0.1)"},ticks:{color:"rgba(255, 255, 255, 0.7)",font:{size:12}}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(52, 211, 153, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{title:function(t){return"BMI: "+t[0].parsed.y.toFixed(1)},label:function(t){return"Date: "+new Date(t.parsed.x).toLocaleDateString()}}}}}}):t&&(t.parentElement.classList.add("loading"),t.parentElement.innerHTML='<div class="empty-state"><div class="empty-state-icon">‚öñÔ∏è</div><h3>No BMI Data</h3><p>Update your height and weight to see BMI trends</p></div>')}}},{key:"initAssessmentCardInteractions",value:function(){var t=this;this.dashboard.querySelectorAll(".assessment-card").forEach(function(t){t.addEventListener("mouseenter",function(){t.style.transform="translateY(-4px)"}),t.addEventListener("mouseleave",function(){t.style.transform="translateY(0)"}),t.querySelectorAll(".btn").forEach(function(e){e.addEventListener("click",function(a){e.textContent.trim(),t.querySelector(".assessment-title").textContent})})}),this.dashboard.addEventListener("click",function(e){var a=e.target.closest(".btn-recommendations"),i=e.target.closest(".btn-breakdown");a&&(e.preventDefault(),t.toggleSection(a,"recommendations-section")),i&&(e.preventDefault(),t.toggleSection(i,"breakdown-section"))})}},{key:"toggleSection",value:function(t,e){var a=t.closest(".assessment-card").querySelector("."+e);a&&(t.classList.toggle("active"),a.classList.contains("expanded")?"breakdown-section"===e?(this.animateProgressBars(a,"out"),setTimeout(function(){a.classList.remove("expanded"),setTimeout(function(){a.style.display="none",a.classList.add("hidden")},400)},600)):(a.classList.remove("expanded"),setTimeout(function(){a.style.display="none",a.classList.add("hidden")},400)):(a.style.display="block",a.classList.remove("hidden"),requestAnimationFrame(function(){a.classList.add("expanded")}),"breakdown-section"===e&&this.animateProgressBars(a,"in")))}},{key:"animateProgressBars",value:function(t,e){t.querySelectorAll(".category-score-fill").forEach(function(t,a){var i=t.style.width;t.style.setProperty("--target-width",i),setTimeout(function(){"in"===e?(t.classList.remove("animate-out"),t.classList.add("animate-in")):(t.classList.remove("animate-in"),t.classList.add("animate-out"))},100*a)})}},{key:"initProgressBarAnimation",value:function(){var t=this.dashboard.querySelector(".progress-fill");if(t){var e=t.style.width;t.style.width="0%",setTimeout(function(){t.style.width=e},1e3)}}},{key:"init",value:function(){this.initDetailsToggle(),this.initContextualText(),this.initScoreAnimation(),this.initPillarAnimation(),this.initHistoricalCharts(),this.initHealthMapAccordion(),this.initToggleAll(),this.initAssessmentCardInteractions(),this.initProgressBarAnimation(),this.initThemeToggle()}}])}()})();
//# sourceMappingURL=user-dashboard.min.js.map